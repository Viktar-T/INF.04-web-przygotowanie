<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025-01-25-01 - gallery-basic</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel Standalone for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .sandbox-container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        
        /* App.css for 2025-01-25-01 gallery-basic solution */
body {
  padding: 20px;
}

    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Loading React component...</p>
        </div>
    </div>

    <script type="text/babel">
        // Transform the JSX code to work in this environment
        const jsxCode = `import { useState } from 'react'
import './App.css'
import 'bootstrap/dist/css/bootstrap.css'

function App() {
    const [showAnimals, setShowAnimals] = useState(true)
    const [showFlowers, setShowFlowers] = useState(true)
    const [showCars, setShowCars] = useState(true)

    const [photos, setPhotos] = useState([
        { id: 0, alt: "Mak", filename: "obraz1.jpg", category: 1, downloads: 35 },
        { id: 1, alt: "Bukiet", filename: "obraz2.jpg", category: 1, downloads: 43 },
        { id: 2, alt: "Dalmatyńczyk", filename: "obraz3.jpg", category: 2, downloads: 2 },
        { id: 3, alt: "Świnka morska", filename: "obraz4.jpg", category: 2, downloads: 53 },
        { id: 4, alt: "Rotwailer", filename: "obraz5.jpg", category: 2, downloads: 43 },
        { id: 5, alt: "Audi", filename: "obraz6.jpg", category: 3, downloads: 11 },
        { id: 6, alt: "kotki", filename: "obraz7.jpg", category: 2, downloads: 22 },
        { id: 7, alt: "Róża", filename: "obraz8.jpg", category: 1, downloads: 33 },
        { id: 8, alt: "Świnka morska", filename: "obraz9.jpg", category: 2, downloads: 123 },
        { id: 9, alt: "Foksterier", filename: "obraz10.jpg", category: 2, downloads: 22 },
        { id: 10, alt: "Szczeniak", filename: "obraz11.jpg", category: 2, downloads: 12 },
        { id: 11, alt: "Garbus", filename: "obraz12.jpg", category: 3, downloads: 321 }
    ])

    const filteredPhotos = photos.filter(p => {
        if (p.category === 1 && showFlowers) {
            return true;
        } else if (p.category === 2 && showAnimals) {
            return true;
        } else if (p.category === 3 && showCars) {
            return true;
        }

        return false;
    })

    function updateDownloads(id) {
        const newPhotos = [...photos]

        for (const p of newPhotos) {
            if (p.id === id) {
                p.downloads++;
                break;
            }
        }

        setPhotos(newPhotos)
    }

    return (
        <>
            <h1>Kategorie zdjęć</h1>

            <div className="form-check form-check-inline form-switch">
                <input type="checkbox" name="flowers" id="flowers" className="form-check-input" checked={showFlowers}
                    onChange={() => setShowFlowers(!showFlowers)} />
                <label htmlFor="flowers" className="form-check-label">Kwiaty</label>
            </div>
            <div className="form-check form-check-inline form-switch">
                <input type="checkbox" name="animals" id="animals" className="form-check-input" checked={showAnimals}
                    onChange={() => setShowAnimals(!showAnimals)} />
                <label htmlFor="animals" className="form-check-label">Zwierzęta</label>
            </div>
            <div className="form-check form-check-inline form-switch">
                <input type="checkbox" name="cars" id="cars" className="form-check-input" checked={showCars}
                    onChange={() => setShowCars(!showCars)} />
                <label htmlFor="cars" className="form-check-label">Samochody</label>
            </div>

            <div className="row">
                {filteredPhotos.map(p => (
                    <div key={p.id} className="col">
                        <img src={"/assets/2025/" + p.filename} alt={p.alt} className="rounded" style={{ margin: "5px" }} />
                        <h4>Pobrań: {p.downloads}</h4>
                        <button className="btn btn-success" onClick={() => updateDownloads(p.id)}>Pobierz</button>
                    </div>
                ))}
            </div>
        </>
    )
}

export default App
`;
        
        // Create a component from the JSX code
        const AppComponent = () => {
            try {
                // Use eval to execute the JSX code in this context
                const Component = eval('(' + jsxCode + ')');
                return <Component />;
            } catch (error) {
                console.error('Error executing component:', error);
                return (
                    <div className="error">
                        <h4>Error Loading Component</h4>
                        <p>Failed to execute the React component.</p>
                        <p><strong>Error:</strong> {error.message}</p>
                        <details>
                            <summary>Stack Trace</summary>
                            <pre>{error.stack}</pre>
                        </details>
                    </div>
                );
            }
        };

        // Render the component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AppComponent />);
    </script>
</body>
</html>